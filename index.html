<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" href="img/logoperpus2.png">
    <meta charset="utf-8">
    <title>Customer Satisfaction</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <script type="text/javascript" src="js/script.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>

</head>

<body>
    <!-- ----------------------------------header 1 ----------------------------------->
    <div class="wrap">
        <div class="container">
            <div class="col-lg-1">
                <img class="logo" src="img/logoperpus2.png" height="50px" align="left">
            </div>

            <div class="col-lg-4">
                <h1 class="judul">UPT. PERPUSTAKAAN UNIVERSITAS LAMPUNG</h1>
            </div>

            <div class="visi">
                <div class="col-lg-7">
                    <p>Visi: Pusat Pengetahuan modern berbasis Teknologi Informasi (TI) yang menunjang Visi Unila</p>
                </div>
            </div>
        </div>
        <legend></legend>
        <!--------------------------------- Header 1 selesai --------------------------->

        <!---------------------------------- Header 2 ---------------------------------->
        <div class="surveysingkat">
            <h2>SURVEY KEPUASAN SINGKAT TERHADAP PERPUSTAKAAN</h2>
            <form action="action.php" method="post" autocomplete="on" id="">
                <fieldset>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <label class="btn btn-success ">
						    <input type="radio" name="q1" value="100" ><img class=" q-gambar img-responsive" src="img/sangatpuas.png" alt="sangat puas">
				    	</label>
                        <label class="btn btn-primary">
					 	   <input type="radio" name="q1" value="75" ><img class="q-gambar img-responsive"src="img/puas.png" alt="puas">
				    	</label>
                        <label class="btn btn-warning">
						    <input type="radio" name="q1" value="25" ><img class=" q-gambar img-responsive"src="img/cukuppuas.png" alt="cukup puas">
				    	</label>
                        <label class="btn btn-danger">
						    <input type="radio" name="q1" value="0" ><img class="q-gambar img-responsive" src="img/tidakpuas.png" alt="tidak puas">
				    	</label>
                    </div>
                </fieldset>
            </form>
        </div>
        <!--------------------------------- Header 2 selesai ---------------------------->

        <!------------------------------------ Header 3  --------------------------------->
        <section class="pilihan" id="">
            <div class="container">
                <h3>SILAHKAN BERIKAN PENILAIAN TERHADAP LAYANAN KAMI BERDASARKAN</h3>
                <div class="col-lg-4 ">
                    <a href="survey.html?kategori=fasilitas"><img class="p-gambar" src="img/fasilitas2.jpg" alt=""></a>
                    <a href="survey.html?kategori=fasilitas" class="box"><i class="glyphicon glyphicon-home" ></i> FASILITAS</a>
                </div>
                <div class="col-lg-4 ">
                    <a href="survey.html?kategori=umum"><img class="p-gambar" src="img/pelayanan2.jpg" alt=""></a>
                    <a href="survey.html?kategori=umum" class="box"><i class="glyphicon glyphicon-user" ></i> PELAYANAN UMUM</a>
                </div>
                <div class="col-lg-4 ">
                    <a href="survey.html?kategori=peminjaman"><img class="p-gambar" src="img/peminjaman2.jpg" alt=""></a>
                    <a href="survey.html?kategori=peminjaman" class="box"><i class="glyphicon glyphicon-book" ></i> PEMINJAMAN</a>
                </div>
            </div>
        </section>
        <!-- Header 3 selesai -->

    </div>

<script>
        let btnQ = document.querySelectorAll("label.btn");

        // Memberikan tanda checked pada tombol yang ditekan
        btnQ.forEach(btnQa => btnQa.addEventListener("click", function () {
            btnQ.forEach(btnQaa => btnQaa.firstElementChild.removeAttribute("checked"));
            btnQa.firstElementChild.setAttribute("checked", true);
            fetchAPIPOST();

        }));

        //Fungsi kirim data
        function fetchAPIPOST() {
            let inputkategori = "singkat";
            let inputmesin = 1;
            let inputq1 = document.querySelector("[name='q1'][checked]") ? document.querySelector("[name='q1'][checked]").value : 50;
            let  inputq2, inputq3, inputq4, inputq5, inputq6, inputq7, inputq8, inputq9, inputq10 ;
            inputq2= inputq3= inputq4= inputq5= inputq6= inputq7= inputq8= inputq9= inputq10 = inputq1;


            let dataInput = "kategori=" + inputkategori + "&mesin=" + inputmesin + "&q1=" + inputq1 + "&q2=" + inputq2 + "&q3=" + inputq3 + "&q4=" + inputq4 + "&q5=" + inputq5 + "&q6=" + inputq6 + "&q7=" + inputq7 + "&q8=" + inputq8 + "&q9=" + inputq9 + "&q10=" + inputq10;

            url = 'api.php/pertanyaan';
            fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: dataInput
                })
                .then((resp) => resp.json())
                .then(function (data) {
                    tampilkanData(data);
                })
                .catch(function (error) {
                    console.log(JSON.stringify(error));
                });
        }

        // Fungsi untuk menampilkan data
        function tampilkanData(dataRAW) {
            console.log("Status: " + dataRAW.status + "<br/>");
            console.log("ID data: " + dataRAW.id);
        }
    </script>

</body>

</html>